<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="css/styles.css" rel="stylesheet" />
    <script src="js/jquery.min.js"></script>

    <style>
      .employee-details {
        display: flex;
        gap: 20px;
        border: 1px solid #ccc;
        padding: 20px;
        border-radius: 10px;
        background-color: #f9f9f9;
      }

      .employee-details img {
        border-radius: 50%;
        width: 208px;
        height: 208px;
        object-fit: cover;
      }

      .employee-info {
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .employee-info h1 {
        margin: 0;
        font-size: 2em;
        font-weight: bold;
      }

      .employee-info h2 {
        margin: 0;
        font-size: 1.5em;
        font-weight: normal;
      }

      .employee-contact {
        margin-top: 20px;
      }

      .employee-contact div {
        margin: 5px 0;
      }

      .employee-contact,
      .employee-table {
        flex: 1;
      }
    </style>
  </head>

  <body class="bg-gray-100">
    <div id="container" class="flex">
      <div id="sidebarContainer" class="w-2/12 bg-gray-800 h-screen text-white">
        @@include('components/sidebarForStaff.html')
      </div>
      <div class="flex-grow p-4 w-10/12">
        <!-- Nội dung chính của Staff Screen -->
        <div
          id="employeeDetails"
          class="flex justify-center items-center max-h-screen"
        >
          <div
            class="employee-details w-full shadow-xl rounded-2xl p-10 border"
          >
            <div id="employeeImage" class="flex flex-col items-center">
              <img
                src="https://via.placeholder.com/150"
                alt="Employee Image"
                class="rounded-full"
              />
              <div class="employee-contact">
                <div id="employeePhoneNumber">
                  <strong>Phone Number:</strong> 0932479543
                </div>
                <div id="employeeEmail">
                  <strong>Email:</strong> huyhanhoppo@gmail.com
                </div>
                <div id="employeeAddress"><strong>Address:</strong> FPT</div>
              </div>
            </div>
            <div class="employee-info">
              <h1 id="employeeName">Tan Le</h1>
              <h2 id="employeeRole">ADMIN</h2>
            </div>
            <div class="employee-table"></div>
          </div>
          <!-- Thêm đường kẻ ngang -->
          <!-- Các nội dung khác -->
          <div>
            <!-- Nội dung khác sẽ nằm ở đây -->
          </div>
        </div>
      </div>
    </div>
    <script>
      $(document).ready(function () {
        const token = localStorage.getItem("token");
        const userId = localStorage.getItem("userId");
        if (userId) {
          fetchEmployeeDetails(userId);
        } else {
          alert("Không có thông tin người dùng, vui lòng đăng nhập lại!");
          window.location.href = "/login.html";
        }

        function fetchEmployeeDetails(employeeId) {
          $.ajax({
            type: "GET",
            headers: {
              Authorization: `Bearer ${token}`,
            },
            url: `http://localhost:8080/employee/listemployee/${employeeId}`,
            success: function (response) {
              if (response.status === "OK") {
                displayEmployeeDetails(response.data);
              } else {
                alert(response.desc);
              }
            },
            error: function () {
              alert("Không thể lấy thông tin chi tiết của nhân viên!");
            },
          });
        }

        function displayEmployeeDetails(employee) {
          $("#employeeImage img").attr("src", employee.image);
          $("#employeeName").text(`${employee.firstName} ${employee.lastName}`);
          $("#employeeRole").text(employee.role.name);
          const contactHtml = `
            <div><strong>Phone Number:</strong> ${employee.phoneNumber}</div>
            <div><strong>Email:</strong> ${employee.email}</div>
            <div><strong>Address:</strong> ${employee.address}</div>
          `;
          $(".employee-contact").html(contactHtml);
        }
      });
    </script>
  </body>
</html>
